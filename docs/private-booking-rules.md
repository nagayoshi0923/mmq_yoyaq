# 貸切公演 時間調整ルール

## 基本設定

| 項目 | 値 | 備考 |
|------|-----|------|
| 最早開始時間 | 9:00 | これより早い開始は不可 |
| 最遅終了時間 | 23:00 | これより遅い終了は不可 |
| 片付け時間 | 30分 | 公演終了後の清掃・片付け |
| 公演間の切り替え（最短） | 60分 | 片付け30分 + 準備30分 |
| 公演間の切り替え（基本） | 90分 | 片付け30分 + 準備・余裕60分 |

---

## 公演枠の基本時間

| 枠 | デフォルト開始 | 備考 |
|----|--------------|------|
| 朝公演 | 10:00 | シナリオ時間により9:00まで早める可能性あり |
| 昼公演 | 14:00 | 朝公演終了+90分後（基本） |
| 夜公演 | 18:00 | 昼公演終了+90分後（基本） |

---

## 時間調整ルール

### 朝公演の調整

| 条件 | 対応 |
|------|------|
| 朝公演終了+90分が14:00を超える | 朝公演開始を早める（最早9:00） |
| 朝公演を9:00にしても昼公演14:00に間に合わない | 昼公演開始を遅らせる（最短60分間隔まで） |

### 昼公演の調整

| 条件 | 対応 |
|------|------|
| 昼公演終了+90分が18:00を超える | 夜公演開始を遅らせる |
| 昼公演終了+60分後でも23:00を超える | 夜公演は不可 |

### 夜公演の調整

| 条件 | 対応 |
|------|------|
| 夜公演が23:00を超える | 夜公演開始を早める（昼公演終了+60分まで） |
| 開始を早めても23:00を超える | 夜公演は不可（1日2公演のみ） |

---

## シナリオ時間別 公演スケジュール例

切り替え時間90分（基本）を考慮した場合の例：

| シナリオ時間 | 朝公演 | 昼公演 | 夜公演 | 最大公演数 |
|-------------|--------|--------|--------|----------|
| 120分（2h） | 10:00〜12:00 | 14:00〜16:00 | 18:00〜20:00 | 3公演 |
| 150分（2.5h） | 10:00〜12:30 | 14:00〜16:30 | 18:00〜20:30 | 3公演 |
| 180分（3h） | 10:00〜13:00 | 14:30〜17:30 | 19:00〜22:00 | 3公演 |
| 210分（3.5h） | 9:30〜13:00 | 14:30〜18:00 | 19:30〜23:00 | 3公演 |
| 240分（4h） | 9:00〜13:00 | 14:30〜18:30 | - | 2公演 |
| 270分（4.5h） | 9:00〜13:30 | 15:00〜19:30 | - | 2公演 |
| 300分（5h） | 9:00〜14:00 | 15:30〜20:30 | - | 2公演 |
| 330分（5.5h） | 9:00〜14:30 | 16:00〜21:30 | - | 2公演 |
| 360分（6h） | 9:00〜15:00 | 16:30〜22:30 ❌ | - | 1公演 |
| 390分（6.5h） | 9:00〜15:30 | - | - | 1公演 |
| 420分（7h） | 9:00〜16:00 | - | - | 1公演 |
| 450分（7.5h） | 9:00〜16:30 | - | - | 1公演 |
| 480分（8h） | 9:00〜17:00 | - | - | 1公演 |
| 510分（8.5h） | 9:00〜17:30 | - | - | 1公演 |
| 540分（9h） | 9:00〜18:00 | - | - | 1公演 |
| 570分（9.5h） | 9:00〜18:30 | - | - | 1公演 |
| 600分（10h） | 9:00〜19:00 | - | - | 1公演 |

※ 切り替え60分（最短）で調整した場合はもう少し余裕あり

---

## シナリオ組み合わせによる3公演パターン

異なるシナリオを組み合わせる場合、長時間シナリオでも3公演可能なケースがあります。

### パターン一覧（切り替え90分で計算）

| パターン | 朝公演 | 昼公演 | 夜公演 | 合計時間 | 可否 |
|---------|--------|--------|--------|---------|------|
| 3h + 3h + 3h | 10:00〜13:00 | 14:30〜17:30 | 19:00〜22:00 | 9h | ✓ |
| 3h + 3h + 3.5h | 10:00〜13:00 | 14:30〜17:30 | 19:00〜22:30 | 9.5h | ✓ |
| 3h + 3.5h + 3h | 10:00〜13:00 | 14:30〜18:00 | 19:30〜22:30 | 9.5h | ✓ |
| 3.5h + 3h + 3h | 9:30〜13:00 | 14:30〜17:30 | 19:00〜22:00 | 9.5h | ✓ |
| 3h + 3h + 4h | 10:00〜13:00 | 14:30〜17:30 | 19:00〜23:00 | 10h | ✓ |
| 3h + 4h + 3h | 9:30〜12:30 | 14:00〜18:00 | 19:30〜22:30 | 10h | ✓ |
| 4h + 3h + 3h | 9:00〜13:00 | 14:30〜17:30 | 19:00〜22:00 | 10h | ✓ |
| 3.5h + 3.5h + 3h | 9:30〜13:00 | 14:30〜18:00 | 19:30〜22:30 | 10h | ✓ |
| 3h + 3.5h + 3.5h | 10:00〜13:00 | 14:30〜18:00 | 19:30〜23:00 | 10h | ✓ |
| 3.5h + 3h + 3.5h | 9:30〜13:00 | 14:30〜17:30 | 19:00〜22:30 | 10h | ✓ |
| 3.5h + 3.5h + 3.5h | 9:00〜12:30 | 14:00〜17:30 | 19:00〜22:30 | 10.5h | ✓ |
| 4h + 3h + 3.5h | 9:00〜13:00 | 14:30〜17:30 | 19:00〜22:30 | 10.5h | ✓ |
| 4h + 3.5h + 3h | 9:00〜13:00 | 14:30〜18:00 | 19:30〜22:30 | 10.5h | ✓ |
| 3h + 4h + 3.5h | 9:30〜12:30 | 14:00〜18:00 | 19:30〜23:00 | 10.5h | ✓ |
| 3.5h + 4h + 3h | 9:00〜12:30 | 14:00〜18:00 | 19:30〜22:30 | 10.5h | ✓ |
| 4h + 4h + 3h | 9:00〜13:00 | 14:30〜18:30 | 20:00〜23:00 | 11h | ✓ |
| 4h + 3h + 4h | 9:00〜13:00 | 14:30〜17:30 | 19:00〜23:00 | 11h | ✓ |
| 3h + 4h + 4h | 9:30〜12:30 | 14:00〜18:00 | 19:30〜23:30 ❌ | 11h | ✗ |
| 4h + 4h + 4h | - | - | - | 12h | ✗ |

### 詳細例

#### 例1: 3時間 + 3時間 + 3時間（標準パターン）

| 公演 | シナリオ時間 | 時間 | 備考 |
|------|------------|------|------|
| 朝公演 | 180分（3h） | 10:00〜13:00 | |
| 切り替え | 90分 | 13:00〜14:30 | |
| 昼公演 | 180分（3h） | 14:30〜17:30 | |
| 切り替え | 90分 | 17:30〜19:00 | |
| 夜公演 | 180分（3h） | 19:00〜22:00 | 23:00以内 ✓ |

#### 例2: 4時間 + 3時間 + 3.5時間

| 公演 | シナリオ時間 | 時間 | 備考 |
|------|------------|------|------|
| 朝公演 | 240分（4h） | 9:00〜13:00 | 早めに開始 |
| 切り替え | 90分 | 13:00〜14:30 | |
| 昼公演 | 180分（3h） | 14:30〜17:30 | |
| 切り替え | 90分 | 17:30〜19:00 | |
| 夜公演 | 210分（3.5h） | 19:00〜22:30 | 23:00以内 ✓ |

#### 例3: 3時間 + 4時間 + 3時間（長時間を真ん中に）

| 公演 | シナリオ時間 | 時間 | 備考 |
|------|------------|------|------|
| 朝公演 | 180分（3h） | 9:30〜12:30 | 30分早めに開始 |
| 切り替え | 90分 | 12:30〜14:00 | |
| 昼公演 | 240分（4h） | 14:00〜18:00 | |
| 切り替え | 90分 | 18:00〜19:30 | |
| 夜公演 | 180分（3h） | 19:30〜22:30 | 23:00以内 ✓ |

#### 例4: 4時間 + 4時間 + 3時間（ギリギリパターン）

| 公演 | シナリオ時間 | 時間 | 備考 |
|------|------------|------|------|
| 朝公演 | 240分（4h） | 9:00〜13:00 | 最早開始 |
| 切り替え | 90分 | 13:00〜14:30 | |
| 昼公演 | 240分（4h） | 14:30〜18:30 | |
| 切り替え | 90分 | 18:30〜20:00 | |
| 夜公演 | 180分（3h） | 20:00〜23:00 | ギリギリ ✓ |

### 3公演不可パターン

| パターン | 理由 |
|---------|------|
| 4h + 4h + 4h | 合計12h + 切り替え3h = 15h（14時間超過） |
| 4.5h + 4h + 任意 | 朝+昼で8.5h + 切り替え1.5h = 10hで20:30開始、3h以上不可 |
| 5h + 任意 + 任意 | 朝公演だけで14:00終了、昼+夜で9時間必要 |

**判定式:** 合計シナリオ時間 + 180分（切り替え90分×2）≦ 840分（14時間）なら3公演可能

---

## 1日の最大公演数（同一シナリオの場合）

| シナリオ時間 | 最大公演数 | 備考 |
|-------------|-----------|------|
| 〜210分（3.5h） | 3公演 | 標準 |
| 211分〜330分 | 2公演 | |
| 331分〜600分 | 1公演 | |

※ 異なるシナリオの組み合わせでは、上記より多く開催できる場合あり（上記参照）

---

## 注意事項

1. **お客様への案内**
   - 貸切リクエスト時「開始時間は店舗の状況により調整させていただく場合があります」と明記
   - 時間変更が必要な場合は、お客様に確認してから確定

2. **店舗側の運用**
   - 上記ルールを参考に、実際のスケジュールを調整
   - 長時間シナリオは事前に時間調整の可能性を伝える

3. **更新履歴**
   - 2026-01-02: 初版作成
   - 2026-01-02: 片付け時間30分、切り替え時間（最短60分/基本90分）を追加
   - 2026-01-02: 600分までのパターン追加、シナリオ組み合わせによる3公演パターン追加

---

## 将来的な拡張案

- [ ] シナリオ時間に応じた開始時間の自動計算機能
- [ ] 1日の公演数上限をシナリオごとに設定
- [ ] 店舗ごとの営業時間設定


