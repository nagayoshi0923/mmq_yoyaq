# è²¸åˆ‡äºˆç´„æ©Ÿèƒ½ è©³ç´°

**æœ€çµ‚æ›´æ–°**: 2025-12-30

é¡§å®¢ãŒãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆå…¬æ¼”ï¼ˆè²¸åˆ‡ï¼‰ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã€GMã®ç¢ºèªã‚’çµŒã¦ç®¡ç†è€…ãŒæ‰¿èªã™ã‚‹æ©Ÿèƒ½ã€‚

---

## 1. æ¦‚è¦

### ã“ã®æ©Ÿèƒ½ãŒè§£æ±ºã™ã‚‹èª²é¡Œ

- é¡§å®¢ãŒå¸Œæœ›æ—¥æ™‚ã§è²¸åˆ‡å…¬æ¼”ã‚’ç”³ã—è¾¼ã¿ãŸã„
- GMãŒå¯¾å¿œå¯èƒ½ã‹ç¢ºèªã—ã¦ã‹ã‚‰æ‰¿èªã—ãŸã„
- åº—èˆ—ã¨æ—¥æ™‚ã®ç«¶åˆã‚’é˜²ããŸã„

### ç™»å ´äººç‰©

| äººç‰© | å½¹å‰² |
|------|------|
| **é¡§å®¢** | è²¸åˆ‡ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ |
| **GM** | å¯¾å¿œå¯å¦ã‚’å›ç­”ã™ã‚‹ |
| **ç®¡ç†è€…** | æœ€çµ‚æ‰¿èª/å´ä¸‹ã‚’è¡Œã† |

---

## 2. å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è²¸åˆ‡äºˆç´„ãƒ•ãƒ­ãƒ¼                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ã€é¡§å®¢ã€‘                                                            â”‚
â”‚    â”‚                                                                 â”‚
â”‚    â–¼                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ 1. è²¸åˆ‡ç”³è¾¼ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›                                   â”‚        â”‚
â”‚  â”‚    - ã‚·ãƒŠãƒªã‚ªé¸æŠ                                         â”‚        â”‚
â”‚  â”‚    - å¸Œæœ›æ—¥æ™‚ï¼ˆæœ€å¤§3å€™è£œï¼‰                                â”‚        â”‚
â”‚  â”‚    - å¸Œæœ›åº—èˆ—ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰                               â”‚        â”‚
â”‚  â”‚    - å‚åŠ äººæ•°                                             â”‚        â”‚
â”‚  â”‚    - é€£çµ¡å…ˆæƒ…å ±                                           â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ 2. reservationsãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²                             â”‚        â”‚
â”‚  â”‚    status = 'pending'                                     â”‚        â”‚
â”‚  â”‚    reservation_source = 'private_booking_request'         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ 3. Discordé€šçŸ¥é€ä¿¡                                        â”‚        â”‚
â”‚  â”‚    Edge Function: notify-private-booking-discord          â”‚        â”‚
â”‚  â”‚    â†’ æ‹…å½“å¯èƒ½ãªGMã®Discordãƒãƒ£ãƒ³ãƒãƒ«ã«é€šçŸ¥                â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚  ã€GMã€‘                     â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ 4. GMç¢ºèªç”»é¢ã§å›ç­”                                       â”‚        â”‚
â”‚  â”‚    - å¯¾å¿œå¯èƒ½ãªå€™è£œæ—¥æ™‚ã‚’é¸æŠ                             â”‚        â”‚
â”‚  â”‚    - ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›ï¼ˆä»»æ„ï¼‰                               â”‚        â”‚
â”‚  â”‚    â†’ gm_availability_responsesãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²              â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚  ã€ç®¡ç†è€…ã€‘                 â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ 5. è²¸åˆ‡ç®¡ç†ç”»é¢ã§æ‰¿èª/å´ä¸‹                                â”‚        â”‚
â”‚  â”‚    - GMã®å›ç­”ã‚’ç¢ºèª                                       â”‚        â”‚
â”‚  â”‚    - åº—èˆ—ã‚’é¸æŠ                                           â”‚        â”‚
â”‚  â”‚    - å€™è£œæ—¥æ™‚ã‹ã‚‰1ã¤ç¢ºå®š                                  â”‚        â”‚
â”‚  â”‚    - GMã‚’é¸æŠ                                             â”‚        â”‚
â”‚  â”‚    ğŸš¨ ç«¶åˆãƒã‚§ãƒƒã‚¯ï¼ˆCRITICALï¼‰                            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                                        â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚               â–¼                           â–¼                         â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚        â”‚  æ‰¿èª     â”‚               â”‚  å´ä¸‹     â”‚                    â”‚
â”‚        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚              â”‚                           â”‚                          â”‚
â”‚              â–¼                           â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ schedule_eventsã«   â”‚      â”‚ status = 'rejected' â”‚              â”‚
â”‚  â”‚ å…¬æ¼”ç™»éŒ²            â”‚      â”‚ å´ä¸‹ãƒ¡ãƒ¼ãƒ«é€ä¿¡       â”‚              â”‚
â”‚  â”‚ status = 'confirmed'â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚  â”‚ ç¢ºå®šãƒ¡ãƒ¼ãƒ«é€ä¿¡       â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### 3.1 reservations ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆè²¸åˆ‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰

è²¸åˆ‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ `reservations` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

```typescript
interface PrivateBookingRequest {
  id: string
  reservation_number: string           // äºˆç´„ç•ªå·ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
  reservation_source: 'private_booking_request'
  
  // ã‚·ãƒŠãƒªã‚ªæƒ…å ±
  scenario_id?: string
  scenario_title: string
  
  // é¡§å®¢æƒ…å ±
  customer_name: string
  customer_email: string
  customer_phone: string
  
  // å€™è£œæ—¥æ™‚ï¼ˆJSONï¼‰
  candidate_datetimes: {
    candidates: Array<{
      order: number           // å„ªå…ˆé †ä½ï¼ˆ1ãŒç¬¬ä¸€å¸Œæœ›ï¼‰
      date: string            // æ—¥ä»˜ 'YYYY-MM-DD'
      timeSlot: string        // æ™‚é–“å¸¯ 'æœ' | 'æ˜¼' | 'å¤œ'
      startTime: string       // é–‹å§‹æ™‚åˆ» 'HH:MM'
      endTime: string         // çµ‚äº†æ™‚åˆ» 'HH:MM'
      status: string          // 'pending' | 'selected' | 'rejected'
    }>
    requestedStores?: Array<{
      storeId: string
      storeName: string
    }>
    confirmedStore?: {        // æ‰¿èªæ™‚ã«è¨­å®š
      storeId: string
      storeName: string
    }
  }
  
  participant_count: number
  notes: string
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status: 'pending' | 'confirmed' | 'rejected' | 'cancelled'
  
  // GMå›ç­”ï¼ˆJOINã¾ãŸã¯åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
  gm_responses?: Array<GMResponse>
  
  created_at: string
}
```

### 3.2 gm_availability_responses ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆGMå›ç­”ï¼‰

```typescript
interface GMResponse {
  id: string
  reservation_id: string              // å¯¾è±¡ã®è²¸åˆ‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  staff_id: string                    // å›ç­”ã—ãŸGM
  gm_name?: string
  
  response_type: 'available' | 'unavailable' | 'partial'
  available_candidates?: number[]     // å¯¾å¿œå¯èƒ½ãªå€™è£œã®orderé…åˆ—
  selected_candidate_index?: number
  notes?: string
  
  created_at: string
}
```

### 3.3 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»

```
pendingï¼ˆç”³è¾¼ç›´å¾Œï¼‰
    â”‚
    â”œâ”€â”€â†’ confirmedï¼ˆæ‰¿èªï¼‰
    â”‚       â””â”€â”€â†’ schedule_eventsã«å…¬æ¼”ç™»éŒ²
    â”‚
    â”œâ”€â”€â†’ rejectedï¼ˆå´ä¸‹ï¼‰
    â”‚
    â””â”€â”€â†’ cancelledï¼ˆé¡§å®¢ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰
```

---

## 4. é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `src/pages/PrivateBookingRequest/` | é¡§å®¢ã®ç”³è¾¼ãƒ•ã‚©ãƒ¼ãƒ  |
| `src/pages/GMAvailabilityCheck/` | GMå›ç­”ç”»é¢ |
| `src/pages/PrivateBookingManagement/` | ç®¡ç†è€…ã®æ‰¿èªç”»é¢ |

### ç®¡ç†ç”»é¢ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `components/BookingRequestCard.tsx` | ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰è¡¨ç¤º |
| `components/CandidateDateSelector.tsx` | å€™è£œæ—¥æ™‚é¸æŠUI |
| `components/StoreSelector.tsx` | åº—èˆ—é¸æŠUI |
| `components/GMSelector.tsx` | GMé¸æŠUI |
| `components/ActionButtons.tsx` | æ‰¿èª/å´ä¸‹ãƒœã‚¿ãƒ³ |

### ãƒ•ãƒƒã‚¯

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `hooks/useBookingRequests.ts` | ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§å–å¾— |
| `hooks/useBookingApproval.ts` | æ‰¿èª/å´ä¸‹å‡¦ç† |
| `hooks/useConflictCheck.ts` | ğŸš¨ ç«¶åˆãƒã‚§ãƒƒã‚¯ |
| `hooks/useStoreAndGMManagement.ts` | åº—èˆ—ãƒ»GMé¸æŠç®¡ç† |

### Edge Functions

| é–¢æ•° | å½¹å‰² |
|------|------|
| `notify-private-booking-discord` | GMã¸ã®Discordé€šçŸ¥ |
| `send-private-booking-confirmation` | æ‰¿èªãƒ¡ãƒ¼ãƒ«é€ä¿¡ |
| `send-private-booking-rejection` | å´ä¸‹ãƒ¡ãƒ¼ãƒ«é€ä¿¡ |

---

## 5. ğŸš¨ é‡è¦ãªæ³¨æ„ç‚¹

### 5.1 ç«¶åˆãƒã‚§ãƒƒã‚¯ï¼ˆCRITICALï¼‰

æ‰¿èªæ™‚ã«ã€é¸æŠã—ãŸåº—èˆ—ãƒ»æ—¥æ™‚ãƒ»GMãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯å¿…é ˆã€‚

**ãƒã‚§ãƒƒã‚¯å¯¾è±¡**:
1. `schedule_events` - æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å…¬æ¼”
2. `reservations` - æ—¢ã«ç¢ºå®šã—ã¦ã„ã‚‹ä»–ã®è²¸åˆ‡äºˆç´„

**å®Ÿè£…å ´æ‰€**: `hooks/useConflictCheck.ts`

**âš ï¸ ç¾åœ¨ã®å•é¡Œ**: 
`reservations` ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒã‚§ãƒƒã‚¯ãŒæ¬ è½ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã‚ã‚Šã€‚
è©³ç´°ã¯ [critical-features.md](../../development/critical-features.md) ã‚’å‚ç…§ã€‚

### 5.2 æ™‚é–“å¸¯ã®å®šç¾©

```typescript
const getTimeSlot = (startTime: string): string => {
  const hour = parseInt(startTime.split(':')[0])
  if (hour < 12) return 'æœ'    // 0:00 - 11:59
  if (hour < 17) return 'æ˜¼'    // 12:00 - 16:59
  return 'å¤œ'                    // 17:00 - 23:59
}
```

### 5.3 æ¨©é™ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ¶é™

- **ç®¡ç†è€…ï¼ˆadminï¼‰**: å…¨ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¡¨ç¤º
- **ã‚¹ã‚¿ãƒƒãƒ•ï¼ˆstaffï¼‰**: è‡ªåˆ†ãŒæ‹…å½“ã™ã‚‹ã‚·ãƒŠãƒªã‚ªã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿è¡¨ç¤º

åˆ¤å®šã¯ `staff_scenario_assignments` ãƒ†ãƒ¼ãƒ–ãƒ«ã§è¡Œã†ã€‚

---

## 6. Discordé€šçŸ¥ã®è©³ç´°

### 6.1 é€šçŸ¥ãƒˆãƒªã‚¬ãƒ¼

é¡§å®¢ãŒè²¸åˆ‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ãŸæ™‚ã€‚

### 6.2 é€šçŸ¥å†…å®¹

```
ğŸ“… è²¸åˆ‡äºˆç´„ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

ã‚·ãƒŠãƒªã‚ª: ã€‡ã€‡ã€‡ã€‡
ãŠå®¢æ§˜: å±±ç”° å¤ªéƒ æ§˜
å‚åŠ äººæ•°: 6å

å¸Œæœ›æ—¥æ™‚:
  å€™è£œ1: 2025/01/15 18:00-21:00ï¼ˆå¤œï¼‰
  å€™è£œ2: 2025/01/16 14:00-17:00ï¼ˆæ˜¼ï¼‰
  å€™è£œ3: 2025/01/20 18:00-21:00ï¼ˆå¤œï¼‰

å¸Œæœ›åº—èˆ—: é«˜ç”°é¦¬å ´åº—ã€åˆ¥é¤¨â‘ 

[å¯¾å¿œå¯èƒ½] [å¯¾å¿œä¸å¯]  â† ãƒœã‚¿ãƒ³
```

### 6.3 ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã®å‹•ä½œ

- **å¯¾å¿œå¯èƒ½**: GMç¢ºèªç”»é¢ã¸ã®ãƒªãƒ³ã‚¯
- **å¯¾å¿œä¸å¯**: ä¸å¯ç†ç”±å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°

### 6.4 ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. `staff.discord_channel_id` ã«ãƒãƒ£ãƒ³ãƒãƒ«IDã‚’è¨­å®š
2. æ‹…å½“ã‚·ãƒŠãƒªã‚ªã‚’ `staff_scenario_assignments` ã«ç™»éŒ²

---

## 7. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### GMé€šçŸ¥ãŒå±Šã‹ãªã„

1. `staff.discord_channel_id` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ãã®GMãŒå¯¾è±¡ã‚·ãƒŠãƒªã‚ªã‚’æ‹…å½“ã—ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆ`staff_scenario_assignments`ï¼‰
3. Edge Functionã®ãƒ­ã‚°ã‚’ç¢ºèª

### æ‰¿èªã§ããªã„

1. ç«¶åˆãƒã‚§ãƒƒã‚¯ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãªã„ã‹ç¢ºèª
2. é¸æŠã—ãŸåº—èˆ—ãƒ»æ—¥æ™‚ã«æ—¢å­˜å…¬æ¼”ãŒãªã„ã‹ç¢ºèª
3. GMãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ›´æ–°ã•ã‚Œãªã„

1. RLSãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèªï¼ˆæ¨©é™ãŒã‚ã‚‹ã‹ï¼‰
2. Supabaseã®ãƒ­ã‚°ã‚’ç¢ºèª

---

## 8. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [critical-features.md](../../development/critical-features.md) - ç«¶åˆãƒã‚§ãƒƒã‚¯ã®è©³ç´°
- [features/README.md](../README.md) - æ©Ÿèƒ½æ¦‚è¦ä¸€è¦§
- [discord/DISCORD_BOT_SETUP.md](../../setup/discord/DISCORD_BOT_SETUP.md) - Discordè¨­å®š

