# ラインナップページ改善提案

## 現在の実装状況

### ステータスバッジの表示ロジック

現在のステータス判定ロジック（`useBookingData.ts`）:
```typescript
function getAvailabilityStatus(max: number, current: number): 'available' | 'few_seats' | 'sold_out' {
  const available = max - current
  if (available === 0) return 'sold_out'
  if (available <= 2) return 'few_seats'
  return 'available'
}
```

現在のステータス表示（`ScenarioCard.tsx`）:
- `available`: 「開催中」（緑）
- `few_seats`: 「残りわずか」（オレンジ）
- `sold_out`: 「完売」（赤）
- `private_booking`: 「過去限定公開」（グレー）※公演がない場合

### 問題点・改善の余地

1. **ステータス判定の閾値が固定**
   - 「残りわずか」が2席以下で固定されている
   - シナリオの最大人数に対して割合で判定する方が適切かもしれない

2. **公演がない場合の表示**
   - `private_booking`として「過去限定公開」と表示されているが、実際は「貸切受付中」の方が適切な場合がある

3. **複数公演がある場合の判定**
   - 現在は「最も近い公演」の空席状況で判定
   - 複数公演のうち1つでも空席があれば`available`にするかどうか

4. **ラインナップページの情報不足**
   - シナリオカードに表示される情報が限定的
   - 次回公演日の時間が表示されない
   - ジャンル情報が表示されない

## 改善提案

### 1. ステータス判定ロジックの改善

#### 提案A: 最大人数に対する割合で判定
```typescript
function getAvailabilityStatus(max: number, current: number): 'available' | 'few_seats' | 'sold_out' {
  const available = max - current
  if (available === 0) return 'sold_out'
  
  // 最大人数の20%以下を「残りわずか」とする
  const threshold = Math.max(1, Math.floor(max * 0.2))
  if (available <= threshold) return 'few_seats'
  return 'available'
}
```

#### 提案B: 複数公演を考慮した判定
```typescript
// 複数公演がある場合、最低でも1つ空席があれば 'available'
// すべて満席の場合のみ 'sold_out'
// 残席が少ない公演の割合が高い場合 'few_seats'
```

### 2. ステータスバッジの表示改善

#### 現在の表示
- `available`: 「開催中」（緑）
- `few_seats`: 「残りわずか」（オレンジ）
- `sold_out`: 「完売」（赤）
- `private_booking`: 「過去限定公開」（グレー）

#### 改善案
- `available`: 「予約受付中」（緑）または「開催中」（緑）
- `few_seats`: 「残りわずか」（オレンジ）※空席数を表示「残りX席」
- `sold_out`: 「完売」（赤）
- `private_booking`: 「貸切受付中」（紫）または「公演予定なし」（グレー）

### 3. シナリオカードの情報強化

#### 追加検討項目
- 次回公演の開始時刻を表示
- ジャンルタグの表示（複数の場合は最初の2-3個のみ）
- 空席数の数値表示（残りX席）
- 複数店舗で開催されている場合の表示

### 4. セクション分けの改善

#### 現在の構成
- 新着公演（30日以内リリース）
- 直近公演（次回公演日があるもの）
- 全タイトル（タイトル順）

#### 改善案
- **人気シナリオ**（予約数・満席率が高いもの）
- **新着公演**（30日以内リリース）
- **今月の公演**（今月中に公演があるもの）
- **来月以降の公演**（来月以降に公演があるもの）
- **全タイトル**（タイトル順・ジャンル別フィルター追加）

### 5. フィルター機能の追加

#### 提案
- ジャンルフィルター（ホラー、ミステリー、ファンタジーなど）
- 人数フィルター（4-6人、7-8人、9人以上など）
- 所要時間フィルター（2時間以内、2-3時間、3時間以上など）
- ステータスフィルター（予約受付中、残りわずか、完売のみなど）

### 6. UI/UX改善

#### 検討項目
- シナリオカードのホバー時に詳細情報を表示
- グリッドレイアウトのレスポンシブ対応強化
- ローディング状態の改善（スケルトンローダー）
- 空の状態の改善（検索結果なし、フィルター結果なし）

## 実装優先度

### 高優先度
1. ステータスバッジの表示ロジック改善（提案AまたはB）
2. ステータスバッジのテキスト改善（「予約受付中」など）
3. 空席数の数値表示（残りX席）

### 中優先度
4. シナリオカードの情報強化（次回公演時刻、ジャンル）
5. フィルター機能の追加（ジャンル、人数、所要時間）

### 低優先度
6. セクション分けの改善（人気シナリオなど）
7. UI/UX改善（ホバー詳細、スケルトンローダーなど）

