-- GMテスト公演のスケジュールイベントを追加（カテゴリで判定）

INSERT INTO schedule_events (
  id, date, venue, scenario, gms, start_time, end_time, category, 
  reservation_info, notes, is_cancelled, scenario_id, store_id, 
  start_at, end_at, published, capacity, status
) VALUES
-- 月影のGMテスト公演
('880e8400-e29b-41d4-a716-446655440101', '2025-09-05', '高田馬場店', '都市伝説の真実', '{"月影"}', '19:00', '22:00', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440020', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-05T10:00:00Z', '2025-09-05T13:00:00Z', true, 6, 'scheduled'),
('880e8400-e29b-41d4-a716-446655440102', '2025-09-12', '別館①', '記憶の迷宮', '{"月影"}', '14:00', '18:00', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440021', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-12T05:00:00Z', '2025-09-12T09:00:00Z', true, 6, 'scheduled'),

-- 桜咲のGMテスト公演
('880e8400-e29b-41d4-a716-446655440103', '2025-09-08', '別館②', '学園の秘密', '{"桜咲"}', '15:00', '18:20', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440022', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-08T06:00:00Z', '2025-09-08T09:20:00Z', true, 6, 'scheduled'),
('880e8400-e29b-41d4-a716-446655440104', '2025-09-15', '大久保店', '時をかける少女', '{"桜咲"}', '14:00', '17:40', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440023', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-15T05:00:00Z', '2025-09-15T08:40:00Z', true, 6, 'scheduled'),

-- 龍神のGMテスト公演
('880e8400-e29b-41d4-a716-446655440105', '2025-09-10', '埼玉大宮店', '戦国武将の陰謀', '{"龍神"}', '13:00', '18:00', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440024', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-10T04:00:00Z', '2025-09-10T09:00:00Z', true, 6, 'scheduled'),
('880e8400-e29b-41d4-a716-446655440106', '2025-09-17', '高田馬場店', '江戸の怪奇事件', '{"龍神"}', '14:00', '18:10', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440025', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-17T05:00:00Z', '2025-09-17T09:10:00Z', true, 6, 'scheduled'),

-- 星雲のGMテスト公演
('880e8400-e29b-41d4-a716-446655440107', '2025-09-26', '大久保店', '宇宙ステーションの謎', '{"星雲"}', '13:00', '17:40', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440026', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-26T04:00:00Z', '2025-09-26T08:40:00Z', true, 6, 'scheduled'),
('880e8400-e29b-41d4-a716-446655440108', '2025-09-30', '埼玉大宮店', '未来都市の犯罪', '{"星雲"}', '14:00', '18:20', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440027', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-30T05:00:00Z', '2025-09-30T09:20:00Z', true, 6, 'scheduled'),

-- 古都のGMテスト公演
('880e8400-e29b-41d4-a716-446655440109', '2025-09-14', '高田馬場店', '古代遺跡の秘密', '{"古都"}', '13:00', '18:20', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440028', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-14T04:00:00Z', '2025-09-14T09:20:00Z', true, 6, 'scheduled'),
('880e8400-e29b-41d4-a716-446655440110', '2025-09-21', '別館①', '魔法学校の事件', '{"古都"}', '14:00', '18:00', 'gmtest', '予約済み', 'GMテスト公演', false, '660e8400-e29b-41d4-a716-446655440029', '0269032f-6059-440b-a429-9a56dbb027be', '2025-09-21T05:00:00Z', '2025-09-21T09:00:00Z', true, 6, 'scheduled');

-- 実行確認
SELECT COUNT(*) as inserted_gm_test_events FROM schedule_events WHERE category = 'gmtest';
SELECT 
  s.title as scenario_title,
  s.author,
  COUNT(se.id) as event_count
FROM schedule_events se
JOIN scenarios s ON se.scenario_id = s.id
WHERE se.category = 'gmtest'
GROUP BY s.title, s.author
ORDER BY s.author, s.title;
